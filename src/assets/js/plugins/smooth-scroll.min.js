/*! SmoothScroll v16.1.4 | (c) 2020 Chris Ferdinandi | MIT License */
(function (e, t) {
  if (typeof exports === "object" && typeof module !== "undefined") {
    module.exports = t();
  } else if (typeof define === "function" && define.amd) {
    define(t);
  } else {
    (e = e || self).SmoothScroll = t();
  }
})(this, (function () {
  "use strict";

  var defaults = {
    ignore: "[data-scroll-ignore]",
    header: null,
    topOnEmptyHash: true,
    speed: 500,
    speedAsDuration: false,
    durationMax: null,
    durationMin: null,
    clip: true,
    offset: 0,
    easing: "easeInOutCubic",
    customEasing: null,
    updateURL: true,
    popstate: true,
    emitEvents: true
  };

  var extend = function () {
    var extended = {};
    Array.prototype.forEach.call(arguments, function (obj) {
      for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
          extended[key] = obj[key];
        }
      }
    });
    return extended;
  };

  var escapeHash = function (hash) {
    if (hash.charAt(0) === "#") hash = hash.substr(1);
    var id = "";
    var code;
    for (var i = 0; i < hash.length; i++) {
      code = hash.charCodeAt(i);
      if (
        code === 0 ||
        code <= 31 ||
        code === 127 ||
        (i === 0 && code >= 48 && code <= 57)
      ) {
        id += "\\" + code.toString(16) + " ";
      } else {
        id += hash.charAt(i);
      }
    }
    return "#" + id;
  };

  var getDocHeight = function () {
    return Math.max(
      document.body.scrollHeight,
      document.documentElement.scrollHeight,
      document.body.offsetHeight,
      document.documentElement.offsetHeight,
      document.body.clientHeight,
      document.documentElement.clientHeight
    );
  };

  var getHeaderHeight = function (header) {
    return header
      ? parseInt(window.getComputedStyle(header).height, 10) + header.offsetTop
      : 0;
  };

  var focusElement = function (elem, position, noTransition) {
    if (position === 0) document.body.focus();
    if (!noTransition) {
      elem.focus();
      if (document.activeElement !== elem) {
        elem.setAttribute("tabindex", "-1");
        elem.focus();
      }
      elem.style.outline = "none";
      window.scrollTo(0, position);
    }
  };

  var emitEvent = function (eventName, settings, anchor, toggle) {
    if (!settings.emitEvents || typeof window.CustomEvent !== "function") return;

    document.dispatchEvent(
      new CustomEvent(eventName, {
        bubbles: true,
        detail: { anchor: anchor, toggle: toggle }
      })
    );
  };

  return function (selector, options) {
    var settings, header, scrollTimeout, activeToggle;

    var scroll = {};

    scroll.cancelScroll = function (emit) {
      cancelAnimationFrame(scrollTimeout);
      scrollTimeout = null;
      if (emit) emitEvent("scrollCancel", settings);
    };

    scroll.animateScroll = function (anchor, toggle, userOptions) {
      scroll.cancelScroll();

      var opts = extend(settings || defaults, userOptions || {});
      var isNumber = Object.prototype.toString.call(anchor) === "[object Number]";

      var target = isNumber ? null : anchor;
      var startY = window.pageYOffset;

      if (opts.header && !header) {
        header = document.querySelector(opts.header);
      }

      var headerHeight = getHeaderHeight(header);

      var endY = isNumber
        ? anchor
        : anchor.getBoundingClientRect().top + startY - headerHeight;

      var distance = endY - startY;
      var docHeight = getDocHeight();

      var duration = opts.speedAsDuration
        ? opts.speed
        : Math.abs((distance / 1000) * opts.speed);

      if (opts.durationMax && duration > opts.durationMax) duration = opts.durationMax;
      if (opts.durationMin && duration < opts.durationMin) duration = opts.durationMin;

      var startTime = null;

      var smoothStep = function (timestamp) {
        if (!startTime) startTime = timestamp;

        var elapsed = timestamp - startTime;
        var progress = Math.min(elapsed / duration, 1);

        var ease;
        var t = progress;

        switch (opts.easing) {
          case "easeInQuad": ease = t * t; break;
          case "easeOutQuad": ease = t * (2 - t); break;
          case "easeInOutQuad": ease = t < 0.5 ? 2 * t * t : (4 - 2 * t) * t - 1; break;
          case "easeInOutCubic":
          default:
            ease = t < 0.5 ? 4 * t * t * t :
              (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
        }

        var position = startY + distance * ease;
        window.scrollTo(0, Math.floor(position));

        if (
          position === endY ||
          window.pageYOffset === endY ||
          (startY < endY && window.innerHeight + window.pageYOffset >= docHeight)
        ) {
          scroll.cancelScroll(true);
          focusElement(anchor, endY, isNumber);
          emitEvent("scrollStop", opts, anchor, toggle);
          return;
        }

        scrollTimeout = window.requestAnimationFrame(smoothStep);
      };

      emitEvent("scrollStart", opts, anchor, toggle);
      scroll.cancelScroll(true);
      scrollTimeout = window.requestAnimationFrame(smoothStep);
    };

    var clickHandler = function (event) {
      if (event.defaultPrevented) return;

      if (
        !event.metaKey &&
        !event.ctrlKey &&
        !event.shiftKey &&
        event.target.closest
      ) {
        activeToggle =
          event.target.closest(selector) || event.target.closest("[data-scroll-goto]");
        if (
          activeToggle &&
          activeToggle.tagName.toLowerCase() === "a" &&
          activeToggle.hostname === window.location.hostname
        ) {
          var hash;
          try {
            hash = escapeHash(decodeURIComponent(activeToggle.hash));
          } catch (error) {
            hash = escapeHash(activeToggle.hash);
          }

          var target = document.querySelector(hash);
          if (target) {
            event.preventDefault();
            scroll.animateScroll(target, activeToggle);
          }
        }
      }
    };

    scroll.destroy = function () {
      document.removeEventListener("click", clickHandler, false);
      scroll.cancelScroll();
      settings = null;
      header = null;
    };

    (function init() {
      settings = extend(defaults, options || {});
      document.addEventListener("click", clickHandler, false);
    })();

    return scroll;
  };
}));

/* ScrollIt Plugin */
(function ($) {
  "use strict";

  var PLUGIN = "ScrollIt",
    VERSION = "1.0.3";

  var defaults = {
    upKey: 38,
    downKey: 40,
    easing: "linear",
    scrollTime: 600,
    activeClass: "active",
    onPageChange: null,
    topOffset: 0
  };

  $.scrollIt = function (options) {
    var settings = $.extend(defaults, options);
    var index = 0;
    var maxIndex = $("[data-scroll-index]:last").attr("data-scroll-index");

    var navigate = function (i) {
      if (i < 0 || i > maxIndex) return;
      var target = $("[data-scroll-index=" + i + "]").offset().top + settings.topOffset + 1;
      $("html,body").animate({ scrollTop: target, easing: settings.easing }, settings.scrollTime);
    };

    var clickHandler = function (e) {
      e.preventDefault();
      var target =
        $(e.target).closest("[data-scroll-nav]").attr("data-scroll-nav") ||
        $(e.target).closest("[data-scroll-goto]").attr("data-scroll-goto");
      navigate(parseInt(target));
    };

    var keyHandler = function (e) {
      if ($("html,body").is(":animated")) return false;

      if (e.which === settings.upKey && index > 0) {
        navigate(--index);
        return false;
      }

      if (e.which === settings.downKey && index < maxIndex) {
        navigate(++index);
        return false;
      }

      return true;
    };

    var updateActive = function () {
      var scrollTop = $(window).scrollTop();

      var current = $("[data-scroll-index]").filter(function (_, el) {
        return (
          scrollTop >= $(el).offset().top + settings.topOffset &&
          scrollTop < $(el).offset().top + settings.topOffset + $(el).outerHeight()
        );
      });

      var newIndex = current.first().attr("data-scroll-index");

      if (settings.onPageChange && newIndex && index != newIndex) {
        settings.onPageChange(newIndex);
      }

      index = newIndex;

      $("[data-scroll-nav]").removeClass(settings.activeClass);
      $("[data-scroll-nav=" + newIndex + "]").addClass(settings.activeClass);
    };

    $(window).on("scroll", updateActive).scroll();
    $(window).on("keydown", keyHandler);
    $("body").on("click", "[data-scroll-nav], [data-scroll-goto]", clickHandler);
  };
})(jQuery);
